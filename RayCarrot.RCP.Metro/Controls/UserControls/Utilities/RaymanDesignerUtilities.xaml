<local:BaseUserControl x:Class="RayCarrot.RCP.Metro.RaymanDesignerUtilities"
                       x:TypeArguments="local:RaymanDesignerUtilitiesViewModel"
                       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                       xmlns:local="clr-namespace:RayCarrot.RCP.Metro"
                       xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                       xmlns:rwpf="clr-namespace:RayCarrot.WPF;assembly=RayCarrot.WPF"
                       mc:Ignorable="d" 
                       d:DesignHeight="450" d:DesignWidth="800"
                       d:DataContext="{d:DesignInstance local:RaymanDesignerUtilitiesViewModel}">
    <ScrollViewer x:Name="scrollViewer"
                  Padding="5">
        <StackPanel>
            <i:Interaction.Behaviors>
                <rwpf:UnifiedMarginBehavior Margin="0 8" />
            </i:Interaction.Behaviors>

            <StackPanel Orientation="Horizontal">
                <TextBlock Style="{StaticResource HeaderTextBlock}"
                           Text="Replace Infected Files" />

                <local:InfoIcon Style="{StaticResource AdditionalFilesRequired}" />

                <local:InfoIcon Text="Some versions of Rayman Designer, including Rayman Forever, have some of the RayKit files infected with a malware. Although it does not appear to be harmful, or even active, and GOG has confirmed there is no danger, you can still safely replace the files with their non-infected versions using this utility." />

            </StackPanel>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" MinWidth="110" />
                </Grid.ColumnDefinitions>

                <Grid.Resources>
                    <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Padding" Value="0 0 10 0" />
                    </Style>
                </Grid.Resources>

                <i:Interaction.Behaviors>
                    <rwpf:UnifiedMarginBehavior Margin="0 8" />
                </i:Interaction.Behaviors>

                <TextBlock Grid.Column="0"
                           Text="Language"/>

                <ComboBox Grid.Column="1"
                          ItemsSource="{Binding Path=MapperLanguage, Mode=OneTime, Converter={rwpf:EnumToListConverter}}"
                          SelectedIndex="{Binding Path=MapperLanguage, Converter={rwpf:EnumToIntConverter}}" />

            </Grid>

            <Button Content="Replace"
                    Command="{Binding Path=ReplaceRayKitCommand}"
                    HorizontalAlignment="Left"/>

            <Separator />

            <StackPanel Orientation="Horizontal">
                <TextBlock Style="{StaticResource HeaderTextBlock}"
                           Text="Create Missing Configuration File" />

                <local:InfoIcon Text="During some Rayman Designer installations the configuration file won't be created, causing the Mapper to give an error when launching. This utility will fix that issue by creating the configuration file if not present." />

            </StackPanel>

            <Button Content="Create"
                    Command="{Binding Path=CreateConfigCommand}"
                    HorizontalAlignment="Left"/>

        </StackPanel>
    </ScrollViewer>
</local:BaseUserControl>