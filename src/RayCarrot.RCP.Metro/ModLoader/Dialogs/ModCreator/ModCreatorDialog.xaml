<rcp:WindowContentControl x:Class="RayCarrot.RCP.Metro.ModLoader.Dialogs.ModCreator.ModCreatorDialog"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:rcp="clr-namespace:RayCarrot.RCP.Metro"
                            xmlns:modCreator="clr-namespace:RayCarrot.RCP.Metro.ModLoader.Dialogs.ModCreator"
                            mc:Ignorable="d"
                            d:DesignWidth="800"
                            Language="{UICulture}"
                            Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                            Foreground="{DynamicResource MahApps.Brushes.ThemeForeground}"
                            ResxExtension.DefaultResxName="{x:Static rcp:LocalizationManager.ResourcePath}"
                            d:DataContext="{d:DesignInstance modCreator:ModCreatorViewModel}">
    <!-- TODO-LOC -->
    <rcp:LoadingHost rcp:LoadingHostAssist.ViewModel="{Binding Path=LoaderViewModel, Mode=OneTime}">
        <Grid Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <rcp:Card Grid.Row="0"
                      Margin="{StaticResource RCP.Thicknesses.Card}">
                <StackPanel>

                    <TextBlock Text="Convert patch (.gp) to mod"
                               Style="{StaticResource RCP.Styles.TextBlock.Header}"
                               Margin="0 0 0 4" />

                    <TextBlock Text="Starting with version 14.0 patches have been replaced by mods. You can still use patches (.gp files), but won't be able to create new ones or edit existing ones. Here you can convert a patch into a mod so it can continue to be updated."
                               TextWrapping="Wrap"
                               Margin="0 0 0 4" />

                    <Button Content="Convert"
                            rcp:Icon.Kind="ArchiveSyncOutline"
                            Command="{Binding Path=ConvertLegacyPatchCommand, Mode=OneTime}"
                            Style="{StaticResource RCP.Styles.Button.Flat}"
                            HorizontalAlignment="Left" />

                </StackPanel>
            </rcp:Card>

            <rcp:Card Grid.Row="1"
                      Margin="{StaticResource RCP.Thicknesses.Card}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" 
                               Margin="0 0 0 4"
                               Text="Create new mod"
                               Style="{StaticResource RCP.Styles.TextBlock.Header}" />

                    <ScrollViewer Grid.Row="1">
                        <StackPanel>
                            <Button Content="Mod documentation"
                                    HorizontalAlignment="Left"
                                    rcp:Icon.Kind="FileDocumentOutline"
                                    Command="{Binding Path=OpenDocumentationCommand, Mode=OneTime}"
                                    Style="{StaticResource RCP.Styles.Button.Flat}"
                                    Margin="0 0 0 8" />

                            <TextBlock Text="1. Select modules"
                                       FontWeight="DemiBold"
                                       Margin="0 0 0 4" />

                            <TextBlock Text="Modules determine how the mod will modify the game. Will it simply replace files or perform more game-specific patches? The available modules differs from game to game. You can use multiple modules within the same mod."
                                       TextWrapping="Wrap"
                                       Margin="0 0 0 4" />

                            <ItemsControl Margin="0 0 0 12" 
                                          ItemsSource="{Binding Path=Modules, Mode=OneTime}"
                                          d:ItemsSource="{d:SampleData ItemCount=3}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <rcp:Card Margin="{StaticResource RCP.Thicknesses.Card}"
                                                  Background="{DynamicResource RCP.Brushes.Card.SecondaryBackground}">
                                            <StackPanel>
                                                <CheckBox IsChecked="{Binding Path=IsEnabled}" 
                                                          Style="{StaticResource RCP.Styles.CheckBox.Default}">
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Path=Name, Mode=OneTime}"
                                                                   d:Text="NAME"
                                                                   FontWeight="Bold"
                                                                   Margin="0 0 0 2" />

                                                        <TextBlock FontSize="11"
                                                                   DataContext="{Binding Path=Description, Mode=OneTime}"
                                                                   Text="{Binding Path=Value}"
                                                                   d:Text="Description"
                                                                   TextWrapping="Wrap" />
                                                    </StackPanel>

                                                    <CheckBox.Triggers>
                                                        <EventTrigger RoutedEvent="CheckBox.Checked">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ModuleContentGrid"
                                                                                                   Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                        <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                                                Value="{x:Static Visibility.Visible}" />
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                                                     Storyboard.TargetName="ModuleContentGrid"
                                                                                     From="0" To="1"
                                                                                     Duration="0:0:0.22" />
                                                                    <DoubleAnimation Storyboard.TargetName="ModuleContentScaleTransform"
                                                                                     Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
                                                                                     From="0" To="1"
                                                                                     Duration="0:0:0.22">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <CubicEase EasingMode="EaseInOut" />
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                        <EventTrigger RoutedEvent="CheckBox.Unchecked">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetName="ModuleContentGrid"
                                                                                     Storyboard.TargetProperty="(UIElement.Opacity)"
                                                                                     From="1"
                                                                                     To="0"
                                                                                     Duration="0:0:0.22" />
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ModuleContentGrid"
                                                                                                   Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                        <DiscreteObjectKeyFrame KeyTime="0:0:0"
                                                                                                Value="{x:Static Visibility.Visible}" />
                                                                        <DiscreteObjectKeyFrame KeyTime="0:0:0.22"
                                                                                                Value="{x:Static Visibility.Collapsed}" />
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <DoubleAnimation Storyboard.TargetName="ModuleContentScaleTransform"
                                                                                     Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
                                                                                     From="1" To="0"
                                                                                     Duration="0:0:0.22">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <CubicEase EasingMode="EaseInOut" />
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                    </CheckBox.Triggers>

                                                </CheckBox>

                                                <Grid x:Name="ModuleContentGrid"
                                                      Height="100"
                                                      Opacity="0"
                                                      Visibility="Collapsed">
                                                    <Grid.LayoutTransform>
                                                        <TransformGroup>
                                                            <ScaleTransform x:Name="ModuleContentScaleTransform" />
                                                        </TransformGroup>
                                                    </Grid.LayoutTransform>

                                                    <!-- TODO-UPDATE: Content dependent on module -->

                                                </Grid>
                                            </StackPanel>
                                        </rcp:Card>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <TextBlock Text="2. Create mod folder"
                                       FontWeight="DemiBold"
                                       Margin="0 0 0 4" />

                            <TextBlock Text="Select an empty folder to create the new mod in."
                                       TextWrapping="Wrap"
                                       Margin="0 0 0 4" />

                            <Button Command="{Binding Path=CreateModCommand, Mode=OneTime}"
                                    Content="Create mod"
                                    rcp:Icon.Kind="{StaticResource RCP.Icons.ModCreator}"
                                    Style="{StaticResource RCP.Styles.Button.Accent}"
                                    HorizontalAlignment="Left"
                                    Margin="0 0 0 12" />

                            <TextBlock Text="3. Edit the metadata and add module contents"
                                       FontWeight="DemiBold"
                                       Margin="0 0 0 4" />

                            <TextBlock Text="It is recommended using a text editor with JSON support to edit the metadata, such as VS Code or Notepad++."
                                       TextWrapping="Wrap"
                                       Margin="0 0 0 12" />

                            <TextBlock Text="4. Publish the mod"
                                       FontWeight="DemiBold"
                                       Margin="0 0 0 4" />

                            <TextBlock Text="The mod is published by adding the folder to a supported archive format (.zip, .7z, .rar). If the mod is published on GameBanana it will show up as a downloadable mod in the mod manager. See the documentation for more details."
                                       TextWrapping="Wrap" />

                        </StackPanel>
                    </ScrollViewer>

                </Grid>
            </rcp:Card>
        </Grid>
    </rcp:LoadingHost>

</rcp:WindowContentControl>